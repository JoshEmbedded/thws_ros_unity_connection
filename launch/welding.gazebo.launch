<launch>

    <!-- Setup MoveIt! Node -->
    <include file="$(find ur5e_moveit_config)/launch/moveit_planning_execution.launch">
        <arg name="sim" value="true"/>
    </include>

    <include file="$(find ur5e_moveit_config)/launch/moveit_rviz.launch">
    </include>

    <include file="$(dirname)/ur5e_bringup_custom.launch">
        <arg name="paused" value="true"/>     
    </include>

    <!-- Start Gazebo in pause mode -->
    <node name="unpause_gazebo" pkg="std_srvs" type="Empty" respawn="false" output="screen" args="/gazebo/unpause" />
    
    <!-- Load the custom Gazebo world
    <arg name="world_name" default="$(find weldingrobot)/worlds/welding.world"/>

    <node pkg="gazebo_ros" type="gazebo" name="gazebo" args="$(arg world_name)" output="screen">
        <param name="use_sim_time" value="true"/>
    </node>

    Load the UR5e model
    <param name="robot_description" command="$(find xacro)/xacro '$(find ur_description)/urdf/ur5e.xacro'"/>

    <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher" output="screen">
        <remap from="/robot_description" to="/robot_description"/>
    </node>

    Spawn the UR5e robot
    <node pkg="gazebo_ros" type="spawn_model" name="spawn_ur5e" output="screen"
          args="-param robot_description -urdf -model ur5e -x 0 -y 0 -z 0.5"/>

    <node name="controller_spawner" pkg="controller_manager" type="spawner" respawn="false" output="screen"
      args="manipulator_controller joint_state_controller"/> -->

</launch>
